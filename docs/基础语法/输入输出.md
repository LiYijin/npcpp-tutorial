# 输入输出

输入输出是程序与用户交互的重要方式。C语言提供了丰富的输入输出函数。

## printf函数 - 格式化输出

### 基本用法
```c
#include <stdio.h>

int main() {
    // 输出字符串
    printf("Hello, World!\n");

    // 输出整数
    int age = 20;
    printf("我今年%d岁\n", age);

    // 输出多个变量
    int year = 2024, month = 10, day = 30;
    printf("今天是%d年%d月%d日\n", year, month, day);

    return 0;
}
```

### 格式控制符
```c
#include <stdio.h>

int main() {
    int integer = 42;
    float floating = 3.14159f;
    double double_val = 2.718281828;
    char character = 'A';
    char string[] = "Hello";

    // 整数输出
    printf("整数: %d\n", integer);
    printf("八进制: %o\n", integer);
    printf("十六进制: %x\n", integer);
    printf("无符号整数: %u\n", integer);

    // 浮点数输出
    printf("浮点数: %f\n", floating);
    printf("科学计数法: %e\n", floating);
    printf("双精度: %lf\n", double_val);
    printf("简短形式: %g\n", floating);

    // 字符和字符串
    printf("字符: %c\n", character);
    printf("字符串: %s\n", string);

    // 输出百分号
    printf("完成率: %d%%\n", 85);

    return 0;
}
```

### 输出格式控制
```c
#include <stdio.h>

int main() {
    int num = 123;
    float pi = 3.14159f;

    // 设置宽度
    printf("默认: |%d|\n", num);
    printf("宽度10: |%10d|\n", num);
    printf("宽度10，左对齐: |%-10d|\n", num);

    // 设置精度
    printf("默认浮点数: %f\n", pi);
    printf("精度2: %.2f\n", pi);
    printf("精度4: %.4f\n", pi);

    // 组合使用
    printf("组合: |%10.2f|\n", pi);
    printf("组合，左对齐: |%-10.2f|\n", pi);

    // 前导零
    printf("前导零: %010d\n", num);

    // 正号显示
    printf("显示正号: %+d\n", 42);
    printf("显示正号: %+d\n", -42);

    return 0;
}
```

## scanf函数 - 格式化输入

### 基本输入
```c
#include <stdio.h>

int main() {
    int age;
    float height;
    char name[50];

    printf("请输入你的年龄: ");
    scanf("%d", &age);

    printf("请输入你的身高(米): ");
    scanf("%f", &height);

    printf("请输入你的名字: ");
    scanf("%s", name);  // 注意：name前不要加&

    printf("姓名: %s, 年龄: %d, 身高: %.2f米\n", name, age, height);

    return 0;
}
```

### 多个变量输入
```c
#include <stdio.h>

int main() {
    int day, month, year;
    float weight, height;

    // 同一行输入多个值
    printf("请输入生日(格式: 日 月 年): ");
    scanf("%d %d %d", &day, &month, &year);

    printf("请输入体重和身高(格式: 体重 身高): ");
    scanf("%f %f", &weight, &height);

    printf("生日: %d/%d/%d\n", day, month, year);
    printf("BMI指数: %.1f\n", weight / (height * height));

    return 0;
}
```

### 输入格式控制
```c
#include <stdio.h>

int main() {
    int year, month, day;
    char date_str[20];

    // 指定格式输入
    printf("请输入日期(格式: YYYY-MM-DD): ");
    scanf("%d-%d-%d", &year, &month, &day);
    printf("日期: %d年%d月%d日\n", year, month, day);

    // 清除输入缓冲区
    while (getchar() != '\n');

    // 读取整行
    printf("请输入一行文字: ");
    fgets(date_str, sizeof(date_str), stdin);
    printf("你输入的是: %s", date_str);

    return 0;
}
```

## 其他输入输出函数

### putchar和getchar
```c
#include <stdio.h>

int main() {
    char ch;

    printf("请输入一个字符: ");
    ch = getchar();  // 读取一个字符

    printf("你输入的字符: ");
    putchar(ch);     // 输出一个字符
    putchar('\n');

    // 字符转换示例
    if (ch >= 'a' && ch <= 'z') {
        printf("大写字母: ");
        putchar(ch - 'a' + 'A');
        putchar('\n');
    }

    return 0;
}
```

### puts和gets（不推荐使用gets）
```c
#include <stdio.h>

int main() {
    char str[100];

    printf("请输入一行文字: ");
    // gets(str);  // 不安全，可能导致缓冲区溢出

    // 推荐使用fgets
    fgets(str, sizeof(str), stdin);

    printf("你输入的是: ");
    puts(str);  // 自动添加换行符

    return 0;
}
```

## 实际应用示例

### 学生成绩管理系统
```c
#include <stdio.h>

int main() {
    char name[50];
    int id, math_score, english_score, c_score;
    float average;

    printf("=== 学生成绩录入系统 ===\n");

    printf("请输入学生姓名: ");
    fgets(name, sizeof(name), stdin);
    // 移除fgets读取的换行符
    for (int i = 0; name[i] != '\0'; i++) {
        if (name[i] == '\n') {
            name[i] = '\0';
            break;
        }
    }

    printf("请输入学号: ");
    scanf("%d", &id);

    printf("请输入数学成绩: ");
    scanf("%d", &math_score);

    printf("请输入英语成绩: ");
    scanf("%d", &english_score);

    printf("请输入C语言成绩: ");
    scanf("%d", &c_score);

    // 计算平均分
    average = (math_score + english_score + c_score) / 3.0f;

    // 输出结果
    printf("\n=== 学生成绩单 ===\n");
    printf("姓名: %s\n", name);
    printf("学号: %d\n", id);
    printf("数学: %d分\n", math_score);
    printf("英语: %d分\n", english_score);
    printf("C语言: %d分\n", c_score);
    printf("平均分: %.1f分\n", average);

    // 判断等级
    printf("等级: ");
    if (average >= 90) {
        printf("优秀\n");
    } else if (average >= 80) {
        printf("良好\n");
    } else if (average >= 70) {
        printf("中等\n");
    } else if (average >= 60) {
        printf("及格\n");
    } else {
        printf("不及格\n");
    }

    return 0;
}
```

### 温度转换器
```c
#include <stdio.h>

int main() {
    int choice;
    float temp, result;

    printf("=== 温度转换器 ===\n");
    printf("1. 摄氏度转华氏度\n");
    printf("2. 摄氏度转开尔文\n");
    printf("3. 华氏度转摄氏度\n");
    printf("4. 开尔文转摄氏度\n");
    printf("请选择转换类型 (1-4): ");

    scanf("%d", &choice);

    switch (choice) {
        case 1:
            printf("请输入摄氏温度: ");
            scanf("%f", &temp);
            result = temp * 9.0f / 5.0f + 32.0f;
            printf("%.1f°C = %.1f°F\n", temp, result);
            break;
        case 2:
            printf("请输入摄氏温度: ");
            scanf("%f", &temp);
            result = temp + 273.15f;
            printf("%.1f°C = %.2fK\n", temp, result);
            break;
        case 3:
            printf("请输入华氏温度: ");
            scanf("%f", &temp);
            result = (temp - 32.0f) * 5.0f / 9.0f;
            printf("%.1f°F = %.1f°C\n", temp, result);
            break;
        case 4:
            printf("请输入开尔文温度: ");
            scanf("%f", &temp);
            result = temp - 273.15f;
            printf("%.2fK = %.1f°C\n", temp, result);
            break;
        default:
            printf("无效的选择！\n");
    }

    return 0;
}
```

### 货币计算器
```c
#include <stdio.h>

int main() {
    float price, quantity, total, discount, payment;
    int items;

    printf("=== 商品价格计算器 ===\n");

    printf("请输入商品单价: ");
    scanf("%f", &price);

    printf("请输入购买数量: ");
    scanf("%d", &items);

    total = price * items;

    printf("小计: %.2f元\n", total);

    // 折扣计算
    if (total >= 1000) {
        discount = total * 0.1f;  // 10%折扣
        printf("折扣: %.2f元 (10%%)\n", discount);
    } else if (total >= 500) {
        discount = total * 0.05f; // 5%折扣
        printf("折扣: %.2f元 (5%%)\n", discount);
    } else {
        discount = 0;
        printf("折扣: 0.00元\n");
    }

    total -= discount;
    printf("应付金额: %.2f元\n", total);

    printf("请输入支付金额: ");
    scanf("%f", &payment);

    if (payment >= total) {
        printf("找零: %.2f元\n", payment - total);
    } else {
        printf("支付金额不足！还差%.2f元\n", total - payment);
    }

    return 0;
}
```

## 输入验证

### 基本输入验证
```c
#include <stdio.h>

int main() {
    int age;
    float score;

    // 年龄验证
    do {
        printf("请输入年龄(1-120): ");
        scanf("%d", &age);

        if (age < 1 || age > 120) {
            printf("无效的年龄，请重新输入！\n");
        }
    } while (age < 1 || age > 120);

    // 分数验证
    do {
        printf("请输入分数(0-100): ");
        scanf("%f", &score);

        if (score < 0 || score > 100) {
            printf("无效的分数，请重新输入！\n");
        }
    } while (score < 0 || score > 100);

    printf("年龄: %d, 分数: %.1f\n", age, score);

    return 0;
}
```

## 常见问题和解决方法

### scanf缓冲区问题
```c
#include <stdio.h>

int main() {
    int number;
    char ch;

    printf("请输入一个数字: ");
    scanf("%d", &number);

    // 清除输入缓冲区中的换行符
    while (getchar() != '\n');

    printf("请输入一个字符: ");
    ch = getchar();

    printf("数字: %d, 字符: %c\n", number, ch);

    return 0;
}
```

## 练习

1. 编写程序计算圆的面积和周长
2. 实现一个简单的计算器，支持加减乘除
3. 编写程序输入学生的多科成绩并计算平均分
4. 实现一个单位转换器（长度、重量等）

## 下一步

掌握了输入输出后，让我们继续学习[控制流程](控制流程.md)。