# 运算符

运算符是用于执行各种数学和逻辑运算的特殊符号。C语言提供了丰富的运算符。

## 算术运算符

```c
#include <stdio.h>

int main() {
    int a = 10, b = 3;

    // 基本算术运算
    printf("%d + %d = %d\n", a, b, a + b);    // 加法
    printf("%d - %d = %d\n", a, b, a - b);    // 减法
    printf("%d * %d = %d\n", a, b, a * b);    // 乘法
    printf("%d / %d = %d\n", a, b, a / b);    // 除法（整数除法）
    printf("%d %% %d = %d\n", a, b, a % b);   // 取模运算

    // 浮点数运算
    float x = 10.5f, y = 3.2f;
    printf("%.1f / %.1f = %.2f\n", x, y, x / y);

    return 0;
}
```

## 关系运算符

```c
#include <stdio.h>

int main() {
    int a = 10, b = 5, c = 10;

    printf("%d == %d: %d\n", a, b, a == b);   // 等于
    printf("%d != %d: %d\n", a, b, a != b);   // 不等于
    printf("%d > %d: %d\n", a, b, a > b);     // 大于
    printf("%d < %d: %d\n", a, b, a < b);     // 小于
    printf("%d >= %d: %d\n", a, c, a >= c);   // 大于等于
    printf("%d <= %d: %d\n", a, c, a <= c);   // 小于等于

    return 0;
}
```

## 逻辑运算符

```c
#include <stdio.h>

int main() {
    int a = 1, b = 0;  // 在C中，0表示假，非0表示真

    printf("%d && %d = %d\n", a, b, a && b);  // 逻辑与
    printf("%d || %d = %d\n", a, b, a || b);  // 逻辑或
    printf("!%d = %d\n", a, !a);              // 逻辑非

    // 实际应用示例
    int age = 20;
    int hasLicense = 1;

    // 检查是否可以开车（年龄>=18 且 有驾照）
    if (age >= 18 && hasLicense) {
        printf("可以开车\n");
    } else {
        printf("不能开车\n");
    }

    return 0;
}
```

## 赋值运算符

```c
#include <stdio.h>

int main() {
    int a = 10, b = 5;

    // 基本赋值
    int result = a + b;
    printf("result = %d\n", result);

    // 复合赋值运算符
    a += b;     // 等同于 a = a + b
    printf("a += b: %d\n", a);

    a -= b;     // 等同于 a = a - b
    printf("a -= b: %d\n", a);

    a *= b;     // 等同于 a = a * b
    printf("a *= b: %d\n", a);

    a /= b;     // 等同于 a = a / b
    printf("a /= b: %d\n", a);

    a %= b;     // 等同于 a = a % b
    printf("a %%= b: %d\n", a);

    return 0;
}
```

## 自增自减运算符

```c
#include <stdio.h>

int main() {
    int a = 5;

    // 前缀自增
    printf("++a: %d\n", ++a);  // 先自增，再使用
    printf("a的值: %d\n", a);

    a = 5;  // 重置
    // 后缀自增
    printf("a++: %d\n", a++);  // 先使用，再自增
    printf("a的值: %d\n", a);

    a = 5;  // 重置
    // 前缀自减
    printf("--a: %d\n", --a);  // 先自减，再使用

    a = 5;  // 重置
    // 后缀自减
    printf("a--: %d\n", a--);  // 先使用，再自减
    printf("a的值: %d\n", a);

    return 0;
}
```

## 位运算符

```c
#include <stdio.h>

int main() {
    unsigned int a = 12;  // 二进制: 1100
    unsigned int b = 10;  // 二进制: 1010

    printf("a = %u, b = %u\n", a, b);

    // 按位与 &
    printf("a & b = %u\n", a & b);  // 1100 & 1010 = 1000 (8)

    // 按位或 |
    printf("a | b = %u\n", a | b);  // 1100 | 1010 = 1110 (14)

    // 按位异或 ^
    printf("a ^ b = %u\n", a ^ b);  // 1100 ^ 1010 = 0110 (6)

    // 按位取反 ~
    printf("~a = %u\n", ~a);

    // 左移 <<
    printf("a << 1 = %u\n", a << 1);  // 1100 << 1 = 11000 (24)

    // 右移 >>
    printf("a >> 1 = %u\n", a >> 1);  // 1100 >> 1 = 0110 (6)

    return 0;
}
```

## 条件运算符（三元运算符）

```c
#include <stdio.h>

int main() {
    int a = 10, b = 20;
    int max, min;

    // 使用条件运算符找出较大值
    max = (a > b) ? a : b;
    printf("较大值: %d\n", max);

    // 使用条件运算符找出较小值
    min = (a < b) ? a : b;
    printf("较小值: %d\n", min);

    // 判断奇偶数
    int num = 7;
    printf("%d 是 %s\n", num, (num % 2 == 0) ? "偶数" : "奇数");

    return 0;
}
```

## 运算符优先级

```c
#include <stdio.h>

int main() {
    int result;

    // 不同优先级的运算符
    result = 2 + 3 * 4;      // 先乘法，后加法
    printf("2 + 3 * 4 = %d\n", result);

    result = (2 + 3) * 4;    // 括号改变优先级
    printf("(2 + 3) * 4 = %d\n", result);

    // 复杂表达式
    int a = 5, b = 3, c = 2;
    result = a + b * c - a / b;
    printf("5 + 3 * 2 - 5 / 3 = %d\n", result);

    // 使用括号明确运算顺序
    result = (a + (b * c)) - (a / b);
    printf("(5 + (3 * 2)) - (5 / 3) = %d\n", result);

    return 0;
}
```

## 实际应用示例

### 计算器程序
```c
#include <stdio.h>

int main() {
    float num1, num2, result;
    char operator;

    printf("请输入表达式（如：3 + 5）: ");
    scanf("%f %c %f", &num1, &operator, &num2);

    switch (operator) {
        case '+':
            result = num1 + num2;
            break;
        case '-':
            result = num1 - num2;
            break;
        case '*':
            result = num1 * num2;
            break;
        case '/':
            if (num2 != 0) {
                result = num1 / num2;
            } else {
                printf("错误：除数不能为0\n");
                return 1;
            }
            break;
        default:
            printf("错误：不支持的操作符\n");
            return 1;
    }

    printf("结果: %.2f\n", result);
    return 0;
}
```

### 判断闰年
```c
#include <stdio.h>

int main() {
    int year;

    printf("请输入年份: ");
    scanf("%d", &year);

    // 闰年条件：
    // 1. 能被4整除但不能被100整除，或者
    // 2. 能被400整除
    if ((year % 4 == 0 && year % 100 != 0) || year % 400 == 0) {
        printf("%d年是闰年\n", year);
    } else {
        printf("%d年不是闰年\n", year);
    }

    return 0;
}
```

### 温度转换（使用条件运算符）
```c
#include <stdio.h>

int main() {
    float temp, converted;
    int choice;

    printf("温度转换程序\n");
    printf("1. 摄氏度转华氏度\n");
    printf("2. 华氏度转摄氏度\n");
    printf("请选择: ");
    scanf("%d", &choice);

    printf("请输入温度值: ");
    scanf("%f", &temp);

    converted = (choice == 1) ? (temp * 9.0f / 5.0f + 32.0f) : ((temp - 32.0f) * 5.0f / 9.0f);

    printf("转换结果: %.2f%s\n", converted, (choice == 1) ? "°F" : "°C");

    return 0;
}
```

## 运算符优先级表

| 优先级 | 运算符 | 描述 |
|--------|--------|------|
| 1 | () [] -> . | 函数调用、数组下标、结构体成员 |
| 2 | ! ~ ++ -- + - * & sizeof | 一元运算符 |
| 3 | * / % | 乘法、除法、取模 |
| 4 | + - | 加法、减法 |
| 5 | << >> | 位运算左移、右移 |
| 6 | < <= > >= | 关系运算符 |
| 7 | == != | 相等性运算符 |
| 8 | & | 按位与 |
| 9 | ^ | 按位异或 |
| 10 | \| | 按位或 |
| 11 | && | 逻辑与 |
| 12 | \|\| | 逻辑或 |
| 13 | ?: | 条件运算符 |
| 14 | = += -= *= /= %= &= ^= |= <<= >>= | 赋值运算符 |
| 15 | , | 逗号运算符 |

## 练习

1. 编写程序计算两个数的最大公约数
2. 实现一个简单的四则运算计算器
3. 编写程序判断一个数是否为素数
4. 使用位运算符实现两个数的交换

## 下一步

掌握了运算符后，让我们继续学习[输入输出](输入输出.md)。