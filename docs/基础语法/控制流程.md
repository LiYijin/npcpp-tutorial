# 控制流程

控制流程决定了程序的执行顺序，包括条件判断、循环控制等。

## if语句 - 条件判断

### 基本if语句
```c
#include <stdio.h>

int main() {
    int age;

    printf("请输入你的年龄: ");
    scanf("%d", &age);

    if (age >= 18) {
        printf("你是成年人\n");
    }

    if (age < 18) {
        printf("你是未成年人\n");
    }

    return 0;
}
```

### if-else语句
```c
#include <stdio.h>

int main() {
    int score;

    printf("请输入你的分数: ");
    scanf("%d", &score);

    if (score >= 60) {
        printf("恭喜你，及格了！\n");
    } else {
        printf("很遗憾，没有及格。\n");
    }

    return 0;
}
```

### if-else if-else语句
```c
#include <stdio.h>

int main() {
    int score;

    printf("请输入你的分数: ");
    scanf("%d", &score);

    if (score >= 90) {
        printf("等级: A (优秀)\n");
    } else if (score >= 80) {
        printf("等级: B (良好)\n");
    } else if (score >= 70) {
        printf("等级: C (中等)\n");
    } else if (score >= 60) {
        printf("等级: D (及格)\n");
    } else {
        printf("等级: F (不及格)\n");
    }

    return 0;
}
```

### 嵌套if语句
```c
#include <stdio.h>

int main() {
    int age, hasLicense;

    printf("请输入你的年龄: ");
    scanf("%d", &age);

    if (age >= 18) {
        printf("请输入你是否有驾照(1-有, 0-没有): ");
        scanf("%d", &hasLicense);

        if (hasLicense == 1) {
            printf("你可以开车！\n");
        } else {
            printf("你已成年，但没有驾照，不能开车。\n");
        }
    } else {
        printf("你还未成年，不能开车。\n");
    }

    return 0;
}
```

## switch语句 - 多分支选择

### 基本switch语句
```c
#include <stdio.h>

int main() {
    int day;

    printf("请输入星期几(1-7): ");
    scanf("%d", &day);

    switch (day) {
        case 1:
            printf("星期一\n");
            break;
        case 2:
            printf("星期二\n");
            break;
        case 3:
            printf("星期三\n");
            break;
        case 4:
            printf("星期四\n");
            break;
        case 5:
            printf("星期五\n");
            break;
        case 6:
            printf("星期六\n");
            break;
        case 7:
            printf("星期日\n");
            break;
        default:
            printf("无效的输入！\n");
    }

    return 0;
}
```

### switch语句的break作用
```c
#include <stdio.h>

int main() {
    int month;

    printf("请输入月份(1-12): ");
    scanf("%d", &month);

    switch (month) {
        case 12:
        case 1:
        case 2:
            printf("冬季\n");
            break;
        case 3:
        case 4:
        case 5:
            printf("春季\n");
            break;
        case 6:
        case 7:
        case 8:
            printf("夏季\n");
            break;
        case 9:
        case 10:
        case 11:
            printf("秋季\n");
            break;
        default:
            printf("无效的月份！\n");
    }

    return 0;
}
```

## while循环 - 先判断后执行

### 基本while循环
```c
#include <stdio.h>

int main() {
    int i = 1;

    printf("1到10的数字:\n");
    while (i <= 10) {
        printf("%d ", i);
        i++;
    }
    printf("\n");

    return 0;
}
```

### 计算阶乘
```c
#include <stdio.h>

int main() {
    int n, i = 1;
    long factorial = 1;

    printf("请输入一个正整数: ");
    scanf("%d", &n);

    while (i <= n) {
        factorial *= i;
        i++;
    }

    printf("%d! = %ld\n", n, factorial);

    return 0;
}
```

### 输入验证循环
```c
#include <stdio.h>

int main() {
    int number;

    do {
        printf("请输入一个正数: ");
        scanf("%d", &number);

        if (number <= 0) {
            printf("输入错误！请输入正数。\n");
        }
    } while (number <= 0);

    printf("你输入的正数是: %d\n", number);

    return 0;
}
```

## do-while循环 - 先执行后判断

### 基本do-while循环
```c
#include <stdio.h>

int main() {
    int choice;

    do {
        printf("\n=== 菜单 ===\n");
        printf("1. 选项1\n");
        printf("2. 选项2\n");
        printf("3. 退出\n");
        printf("请选择: ");
        scanf("%d", &choice);

        switch (choice) {
            case 1:
                printf("你选择了选项1\n");
                break;
            case 2:
                printf("你选择了选项2\n");
                break;
            case 3:
                printf("程序退出\n");
                break;
            default:
                printf("无效的选择！\n");
        }
    } while (choice != 3);

    return 0;
}
```

## for循环 - 计数器控制循环

### 基本for循环
```c
#include <stdio.h>

int main() {
    // 打印1到10
    printf("1到10的数字:\n");
    for (int i = 1; i <= 10; i++) {
        printf("%d ", i);
    }
    printf("\n");

    // 倒序打印
    printf("10到1的数字:\n");
    for (int i = 10; i >= 1; i--) {
        printf("%d ", i);
    }
    printf("\n");

    return 0;
}
```

### 九九乘法表
```c
#include <stdio.h>

int main() {
    printf("九九乘法表:\n");
    printf("   ");
    for (int i = 1; i <= 9; i++) {
        printf("%4d", i);
    }
    printf("\n");

    for (int i = 1; i <= 9; i++) {
        printf("%2d ", i);
        for (int j = 1; j <= 9; j++) {
            printf("%4d", i * j);
        }
        printf("\n");
    }

    return 0;
}
```

### 嵌套循环
```c
#include <stdio.h>

int main() {
    // 打印三角形
    printf("直角三角形:\n");
    for (int i = 1; i <= 5; i++) {
        for (int j = 1; j <= i; j++) {
            printf("*");
        }
        printf("\n");
    }

    printf("\n等腰三角形:\n");
    for (int i = 1; i <= 5; i++) {
        // 打印空格
        for (int j = 1; j <= 5 - i; j++) {
            printf(" ");
        }
        // 打印星号
        for (int j = 1; j <= 2 * i - 1; j++) {
            printf("*");
        }
        printf("\n");
    }

    return 0;
}
```

## break和continue

### break语句
```c
#include <stdio.h>

int main() {
    // 找到第一个能被7整除的数
    for (int i = 1; i <= 100; i++) {
        if (i % 7 == 0) {
            printf("第一个能被7整除的数是: %d\n", i);
            break;  // 跳出循环
        }
    }

    // 无限循环中使用break
    int count = 0;
    while (1) {  // 无限循环
        printf("Count: %d\n", count);
        count++;
        if (count >= 5) {
            break;  // 跳出无限循环
        }
    }

    return 0;
}
```

### continue语句
```c
#include <stdio.h>

int main() {
    // 打印1-10中不能被3整除的数
    printf("1-10中不能被3整除的数:\n");
    for (int i = 1; i <= 10; i++) {
        if (i % 3 == 0) {
            continue;  // 跳过本次循环的剩余部分
        }
        printf("%d ", i);
    }
    printf("\n");

    return 0;
}
```

## 实际应用示例

### 猜数字游戏
```c
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

int main() {
    int secret_number, guess, attempts = 0;

    // 生成随机数
    srand(time(0));
    secret_number = rand() % 100 + 1;  // 1-100的随机数

    printf("=== 猜数字游戏 ===\n");
    printf("我已经想好了一个1-100的数字，你来猜猜看！\n");

    do {
        printf("请输入你的猜测: ");
        scanf("%d", &guess);
        attempts++;

        if (guess > secret_number) {
            printf("太大了！再试试。\n");
        } else if (guess < secret_number) {
            printf("太小了！再试试。\n");
        } else {
            printf("恭喜你！猜对了！\n");
            printf("你用了%d次猜中。\n", attempts);
        }
    } while (guess != secret_number);

    return 0;
}
```

### 计算器程序
```c
#include <stdio.h>

int main() {
    char operator;
    float num1, num2, result;
    char choice;

    do {
        printf("\n=== 简单计算器 ===\n");
        printf("请输入表达式 (如: 5 + 3): ");
        scanf("%f %c %f", &num1, &operator, &num2);

        switch (operator) {
            case '+':
                result = num1 + num2;
                printf("%.2f + %.2f = %.2f\n", num1, num2, result);
                break;
            case '-':
                result = num1 - num2;
                printf("%.2f - %.2f = %.2f\n", num1, num2, result);
                break;
            case '*':
                result = num1 * num2;
                printf("%.2f * %.2f = %.2f\n", num1, num2, result);
                break;
            case '/':
                if (num2 != 0) {
                    result = num1 / num2;
                    printf("%.2f / %.2f = %.2f\n", num1, num2, result);
                } else {
                    printf("错误：除数不能为0！\n");
                }
                break;
            default:
                printf("错误：不支持的操作符！\n");
        }

        printf("是否继续计算？(y/n): ");
        scanf(" %c", &choice);  // 注意空格，跳过空白字符

    } while (choice == 'y' || choice == 'Y');

    printf("程序结束，再见！\n");

    return 0;
}
```

### 学生成绩统计
```c
#include <stdio.h>

int main() {
    int students, score;
    float total = 0, average;
    int excellent = 0, good = 0, pass = 0, fail = 0;

    printf("请输入学生人数: ");
    scanf("%d", &students);

    for (int i = 1; i <= students; i++) {
        printf("请输入第%d个学生的成绩: ", i);
        scanf("%d", &score);

        // 统计总分
        total += score;

        // 统计各等级人数
        if (score >= 90) {
            excellent++;
        } else if (score >= 80) {
            good++;
        } else if (score >= 60) {
            pass++;
        } else {
            fail++;
        }
    }

    // 计算平均分
    average = total / students;

    // 输出统计结果
    printf("\n=== 成绩统计 ===\n");
    printf("学生人数: %d\n", students);
    printf("平均分: %.1f\n", average);
    printf("优秀(90+): %d人 (%.1f%%)\n", excellent, (float)excellent / students * 100);
    printf("良好(80-89): %d人 (%.1f%%)\n", good, (float)good / students * 100);
    printf("及格(60-79): %d人 (%.1f%%)\n", pass, (float)pass / students * 100);
    printf("不及格(<60): %d人 (%.1f%%)\n", fail, (float)fail / students * 100);

    return 0;
}
```

### 质数判断
```c
#include <stdio.h>

int main() {
    int n, is_prime;

    printf("请输入一个正整数: ");
    scanf("%d", &n);

    if (n <= 1) {
        printf("%d不是质数\n", n);
        return 0;
    }

    is_prime = 1;  // 假设是质数

    for (int i = 2; i * i <= n; i++) {
        if (n % i == 0) {
            is_prime = 0;  // 不是质数
            break;
        }
    }

    if (is_prime) {
        printf("%d是质数\n", n);
    } else {
        printf("%d不是质数\n", n);
    }

    // 找出1-100的所有质数
    printf("\n1-100的质数有:\n");
    for (int i = 2; i <= 100; i++) {
        is_prime = 1;
        for (int j = 2; j * j <= i; j++) {
            if (i % j == 0) {
                is_prime = 0;
                break;
            }
        }
        if (is_prime) {
            printf("%d ", i);
        }
    }
    printf("\n");

    return 0;
}
```

## 练习

1. 编写程序打印斐波那契数列的前20项
2. 实现一个简单的菜单驱动程序
3. 编写程序找出100-200中所有的质数
4. 实现一个简单的ATM机模拟程序
5. 编写程序计算学生的GPA

## 下一步

掌握了控制流程后，恭喜你完成了C语言基础语法的学习！接下来可以进入[进阶特性](../进阶特性/index.md)的学习。